<ng-template #navigation>
  <app-navigation></app-navigation>
</ng-template>
<ng-template #left>
  <app-left-navigation></app-left-navigation>
</ng-template>

<ng-template #content>
  <router-outlet />
</ng-template>

<div class="row gx-0 justify-content-center">
  <div class="app-title col-12 gx-0">
    <div class="d-flex m-3 p-2 p-lg-0 m-lg-0 text-bg-dark">
      <div class="nav-block mr-auto d-block d-lg-none align-self-center mt-1">
        <span
          class="w-100 h-100 rounded d-flex align-items-center justify-content-center nav-block px-2 fs-1"
          data-bs-toggle="offcanvas"
          href="#offcanvasMenu"
          role="button"
          aria-controls="offcanvasMenu"
          hover-classes="bg-body-secondary text-dark "
          ><i class="bi bi-list nav-icon"></i
        ></span>
      </div>
      <!--      <div class="flex-grow-1 d-flex justify-content-center align-self-center">-->
      <div class="row flex-grow-1">
        <div class="col d-none d-md-flex"></div>
        <div class="col d-flex justify-content-center align-self-center">
          <span class="title"
            ><strong>{{ config.title }}</strong></span
          >
        </div>
        <div class="col d-none d-md-flex justify-content-center align-self-center row">
          <div class="col"></div>
          @if (!isLoggedIn) {
            <div class="col d-flex justify-content-end">
              <button class="btn btn-light rounded-pill login-buttons fs-5" routerLink="/login">Login / Sign up</button>
            </div>
<!--            <div class="col">-->
<!--              <button class="btn btn-outline-light rounded-pill login-buttons fs-5" (click)="logoutClicked()">-->
<!--                Sign up-->
<!--              </button>-->
<!--            </div>-->
          } @else {
            <div class="col">
              <button class="btn btn-outline-light rounded-pill login-buttons fs-5" (click)="logoutClicked()">
                Logout
              </button>
            </div>
          }

          <div class="col"></div>
        </div>
      </div>
      <div
        class="nav-block mr-auto d-block d-lg-none align-self-center mt-1"
        (click)="topSearch.classList.toggle('d-none'); topSearch.classList.toggle('top-search')">
        <span
          class="w-100 h-100 rounded d-flex align-items-center justify-content-center nav-block px-2 fs-1"
          hover-classes="bg-body-secondary text-dark nav-icon"
          ><i class="bi bi-search fw-bold"></i
        ></span>
      </div>
    </div>
    <div class="d-flex d-none d-lg-none top-search row justify-content-center m-1 my-2 my-sm-3" #topSearch>
      <form class="row col-11 col-lg-10 justify-content-between p-0">
        <div class="col-12 col-md-8 m-1">
          <label for="homeSearch" class="visually-hidden">{{ config.search_main_label }}</label>
          <input
            type="text"
            class="form-control border-dark focus-ring"
            id="homeSearch"
            [placeholder]="config.search_placeholder" />
        </div>
        <div class="col-12 col-md m-1">
          <button type="submit" class="col-12 btn btn-dark focus-ring">Search</button>
        </div>
      </form>
    </div>
  </div>
  <div class="top-navigation-container col-12 gx-0">
    <div class="col-md-12">
      <ng-container *ngTemplateOutlet="navigation"></ng-container>
    </div>
  </div>
  <div class="row justify-content-center justify-content-lg-start body-container col-12 gx-0">
    <div class="left-nav-container col-0 col-lg-2 text-bg-dark">
      <ng-container *ngTemplateOutlet="left"></ng-container>
    </div>
    <div
      class="content-container col-11 col-lg-10 d-flex flex-lg-column justify-content-center justify-content-lg-start px-lg-5">
      <div class="d-flex flex-column">
        <app-sharing-buttons class="align-self-end py-2"></app-sharing-buttons>
        <ng-container *ngTemplateOutlet="content"></ng-container>
      </div>
    </div>
  </div>
</div>

<app-toasts aria-live="polite" aria-atomic="true"></app-toasts>

<!--<button (click)="testToast()">toast test</button>-->
